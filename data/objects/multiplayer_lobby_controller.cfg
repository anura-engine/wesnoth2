{
	id: "multiplayer_lobby_controller",
	prototype: ["matchmaking_base"],
	hidden_in_game: true,
	is_strict: true,

	properties: {
		screen_width: "int :: SCREEN_WIDTH",
		screen_height: "int :: SCREEN_HEIGHT",

		_titlescreen_controller: { type: "obj titlescreen_controller" },
		_removed_widgets: { type: "[custom_obj]", default: [] },

		return_to_titlescreen: "def() ->commands execute(me, [
			map(spawned_children, remove_object(value)),
			add_object(_titlescreen_controller),
			map(_removed_widgets, add_object(value)),
		])",

		show_widgets: "def() ->commands [
			spawn('button_controller', {
				zorder: zorder+1,
				text: 'Quit',
				x: lib.wesnoth.py(8),
				y: lib.wesnoth.py(8),
				_font_size: lib.wesnoth.px(14),
				button_height: lib.wesnoth.py(24),
				on_click: me.return_to_titlescreen,
			}, [
			]),

			spawn('chat_widget', {
				x: 4,
				y: screen_height - lib.wesnoth.py(360),
				_width: lib.wesnoth.py(320),
				_height: lib.wesnoth.py(240),
			}, [
			]),
		]",
	},

	events: {
		create: "show_widgets()",
	},
}
