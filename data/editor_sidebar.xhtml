<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <style>
body {
	background-color: rgb(48, 48, 48);
	font-family: FreeSans;
	font-size: 14pt;
}
img.i1 {
	border: solid tan 2px;
	padding: 2px;
	display: inline;
	width: 54px;
	height: 54px;
}
img.i1:hover {
	border-color: red;
}
img.i1:focus {
	border-color: lightblue;
}

.themeblue {
	background-color: #7892c2;
	border: 1px solid #4e6096;
	display: inline-block;
	cursor: pointer;
	color: #ffffff;
	padding: 6px 6px 6px 6px;
}

.themeblue:hover {
	background-color: #476e9e;
}

#scrollable {
	overflow: auto;
}

    </style>
<script type="text/ffl">
	set(me.event_handlers.onload, q([
		set(me.document.getElementById('d1').innerHTML, img_str) where img_str = fold(map(get_hex_editor_info(), 
			sprintf(q[&lt;img class="i1" src="%s" x="%d" y="%d" width="%d" height="%d" id="%s" onmousedown="%s('%s')" /&gt; ], 
			value.image_file, value.image_rect[0], value.image_rect[1], value.image_rect[2]-value.image_rect[0]+1, value.image_rect[3]-value.image_rect[1]+1, value.type, 
			"find(level.chars, value.type='editor_controller').do_set_selection", value.type)), a+b),
		
		set(me.document.getElementById('d2').innerHTML, alt_str) where alt_str = fold(fold(map(get_hex_overlay_info(), map(value.alternates, 
			sprintf(q[&lt;img class="i1" src="%s" x="%d" y="%d" width="%d" height="%d" id="%s" onmousedown="find(level.chars, value.type='editor_controller').do_set_selection('%s')" /&gt; ], 
			ov.image_file, ir[0], ir[1], ir[2]-ir[0]+1, ir[3]-ir[1]+1, type, ov.name + ':' + subtype) where type = if(subtype = 'default', ov.name, ov.name + ':' + subtype) 
				where ir = value[0].rect where subtype = key) where ov = value), a+b), a+b),
	]))
</script>
</head>
<body>
	<div id="menu">
		<div id="save" class="themeblue" onmousedown="find(level.chars, value.type='editor_controller').do_save_map()">Save Map</div>
		<div id="load" class="themeblue" onmousedown="find(level.chars, value.type='editor_controller').do_load_map()">Load Map</div>
	</div>
	<div id="scrollable">
		<div id="d1" class="image" />
		<div id="d2" class="image" />
	</div>
</body>
</html>
